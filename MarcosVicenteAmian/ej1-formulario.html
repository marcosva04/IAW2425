<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario</title>
    <style>
        .error {
    color: red;
    font-size: 12px;
}
    </style>
</head>
<body>
    <div>
        <h1>Formulario de Contacto</h1>
        <div>
            <label for="asunto">Asunto*: </label>
            <input type="text" id="asunto" name="asunto">
            <small class="error" id="error-asunto"></small>
        </div>
        <div>
            <label for="dni">DNI/NIE*: </label>
            <input type="text" id="dni" name="dni">
            <small class="error" id="error-dni"></small>
        </div>
        <div>
            <label for="nombre">Nombre*: </label>
            <input type="text" id="nombre" name="nombre">
            <small class="error" id="error-nombre"></small>
        </div>
        <div>
            <label for="apellido1">Primer Apellido*: </label>
            <input type="text" id="apellido1" name="apellido1">
            <small class="error" id="error-apellido1"></small>
        </div>
        <div>
            <label for="apellido2">Segundo Apellido*: </label>
            <input type="text" id="apellido2" name="apellido2">
            <small class="error" id="error-apellido2"></small>
        </div>
        <div>
            <label for="fechaNacimiento">Fecha de Nacimiento: (dd/mm/yyyy)*: </label>
            <input type="date" id="fechaNacimiento" name="fechaNacimiento">
            <small class="error" id="error-fechaNacimiento"></small>
        </div>
        <div>
            <label for="telefono">Teléfono de contacto*: </label>
            <input type="text" id="telefono" name="telefono">
            <small class="error" id="error-tefefono"></small>
        </div>
        <div>
            <label for="email">Correo electrónico (para respuesta): </label>
            <input type="email" id="email" name="email" required>
        </div>
        <div>
            <label for="domicilio">Domicilio*: </label>
            <input type="text" id="domicilio" name="domicilio">
            <small class="error" id="error-domicilio"></small>
        </div>
        <div>
            <label for="domicilio">Código Postal*: </label>
            <input type="text" id="postal" name="postal">
            <small class="error" id="error-postal"></small>
        </div>
        <div>
            <label for="municipio">Municipio*: </label>
            <select name="municipio" id="municipio">
                <option value="0">Selecciona Municipio</option>
				    <option value="41001">Aguadulce</option>
				    <option value="41002">Alanís</option>
				    <option value="41003">Albaida del Aljarafe</option>
				    <option value="41004">Alcalá de Guadaíra</option>
				    <option value="41005">Alcalá del Río</option>
				    <option value="41006">Alcolea del Río</option>
				    <option value="41007">Algaba (La)</option>
				    <option value="41008">Algámitas</option>
				    <option value="41009">Almadén de la Plata</option>
				    <option value="41010">Almensilla</option>
				    <option value="41011">Arahal</option>
				    <option value="41012">Aznalcázar</option>
				    <option value="41013">Aznalcóllar</option>
				    <option value="41014">Badolatosa</option>
				    <option value="41015">Benacazón</option>
				    <option value="41016">Bollullos de la Mitación</option>
				    <option value="41017">Bormujos</option>
				    <option value="41018">Brenes</option>
				    <option value="41019">Burguillos</option>
				    <option value="41020">Cabezas de San Juan (Las)</option>
				    <option value="41021">Camas</option>
				    <option value="41022">Campana (La)</option>
				    <option value="41023">Cantillana</option>
				    <option value="41901">Cañada Rosal</option>
				    <option value="41024">Carmona</option>
				    <option value="41025">Carrión de los Céspedes</option>
				    <option value="41026">Casariche</option>
				    <option value="41027">Castilblanco de los Arroyos</option>
				    <option value="41028">Castilleja de Guzmán</option>
				    <option value="41029">Castilleja de la Cuesta</option>
				    <option value="41030">Castilleja del Campo</option>
				    <option value="41031">Castillo de las Guardas (El)</option>
				    <option value="41032">Cazalla de la Sierra</option>
				    <option value="41033">Constantina</option>
				    <option value="41034">Coria del Río</option>
				    <option value="41035">Coripe</option>
				    <option value="41036">Coronil (El)</option>
				    <option value="41037">Corrales (Los)</option>
				    <option value="41903">Cuervo de Sevilla (El)</option>
				    <option value="41038">Dos Hermanas</option>
				    <option value="41039">Ecija</option>
				    <option value="41040">Espartinas</option>
				    <option value="41041">Estepa</option>
				    <option value="41042">Fuentes de Andalucía</option>
				    <option value="41043">Garrobo (El)</option>
				    <option value="41044">Gelves</option>
				    <option value="41045">Gerena</option>
				    <option value="41046">Gilena</option>
				    <option value="41047">Gines</option>
				    <option value="41048">Guadalcanal</option>
				    <option value="41049">Guillena</option>
				    <option value="41050">Herrera</option>
				    <option value="41051">Huévar del Aljarafe</option>
				    <option value="41902">Isla Mayor</option>
				    <option value="41052">Lantejuela</option>
				    <option value="41053">Lebrija</option>
				    <option value="41054">Lora de Estepa</option>
				    <option value="41055">Lora del Río</option>
				    <option value="41056">Luisiana (La)</option>
				    <option value="41057">Madroño (El)</option>
				    <option value="41058">Mairena del Alcor</option>
				    <option value="41059">Mairena del Aljarafe</option>
				    <option value="41060">Marchena</option>
				    <option value="41061">Marinaleda</option>
				    <option value="41062">Martín de la Jara</option>
				    <option value="41063">Molares (Los)</option>
				    <option value="41064">Montellano</option>
				    <option value="41065">Morón de la Frontera</option>
				    <option value="41066">Navas de la Concepción (Las)</option>
				    <option value="41067">Olivares</option>
				    <option value="41068">Osuna</option>
				    <option value="41069">Palacios y Villafranca (Los)</option>
				    <option value="41904">Palmar de Troya (El)</option>
				    <option value="41070">Palomares del Río</option>
				    <option value="41071">Paradas</option>
				    <option value="41072">Pedrera</option>
				    <option value="41073">Pedroso (El)</option>
				    <option value="41074">Peñaflor</option>
				    <option value="41075">Pilas</option>
				    <option value="41076">Pruna</option>
				    <option value="41077">Puebla de Cazalla (La)</option>
				    <option value="41078">Puebla de los Infantes (La)</option>
				    <option value="41079">Puebla del Río (La)</option>
				    <option value="41080">Real de la Jara (El)</option>
				    <option value="41081">Rinconada (La)</option>
				    <option value="41082">Roda de Andalucía (La)</option>
				    <option value="41083">Ronquillo (El)</option>
				    <option value="41084">Rubio (El)</option>
				    <option value="41085">Salteras</option>
				    <option value="41086">San Juan de Aznalfarache</option>
				    <option value="41088">San Nicolás del Puerto</option>
				    <option value="41087">Sanlúcar la Mayor</option>
				    <option value="41089">Santiponce</option>
				    <option value="41090">Saucejo (El)</option>
				    <option value="41091">Sevilla</option>
				    <option value="41092">Tocina</option>
				    <option value="41093">Tomares</option>
				    <option value="41094">Umbrete</option>
				    <option value="41095">Utrera</option>
				    <option value="41096">Valencina de la Concepción</option>
				    <option value="41097">Villamanrique de la Condesa</option>
				    <option value="41100">Villanueva de San Juan</option>
				    <option value="41098">Villanueva del Ariscal</option>
				    <option value="41099">Villanueva del Río y Minas</option>
				    <option value="41101">Villaverde del Río</option>
				    <option value="41102">Viso del Alcor (El)</option>
				</select>
            </select>
            <small class="error" id="error-municipio"></small>
        </div>
        <div>
            <label for="oficina">Oficina*: </label>
            <select name="oficina" id="oficina">
                <option value="1">Oficina 1</option>
                <option value="2">Oficina 2</option>
                <option value="3">Oficina 3</option>
                <option value="4">Oficina 4</option>
            </select>
            <small class="error" id="error-oficina"></small>
        </div>
        <div>
            <label for="informacion">Información requerida*: </label>
            <textarea id="descripcion" name="descripcion"></textarea>
            <small class="error" id="error-descripcion"></small>
        </div>
        <div>
            <div>
                <label for="anexo1">Fichero anexo I (máximo 2MB)*: </label>
                <input type="file" id="anexo1" name="anexo1" multiple max="2">
                <small class="error" id="error-anexo2"></small>
            </div>
            <div>
                <label for="anexo2">Fichero anexo II (máximo 2MB)*: </label>
                <input type="file" id="anexo2" name="anexo2" multiple max="2">
                <small class="error" id="error-anexo1"></small>
            </div>
            <div>
            <label>
                <input type="checkbox" id="aceptarTerminos" name="aceptarTerminos">
                He leído y acepto la <em>política de datos y normas de uso *</em>
                
            </label>
            <small class="error" id="error-terminos"></small>
        </div>
        <button id="botonEnviar">Enviar</button>
    </div>
    <script>
        function validarDNI(valor){
    let valido = false;
    var validChars = 'TRWAGMYFPDXBNJZSQVHLCKET';
    var nifRexp = /^[0-9]{8}[TRWAGMYFPDXBNJZSQVHLCKET]$/i;
    var nieRexp = /^[XYZ][0-9]{7}[TRWAGMYFPDXBNJZSQVHLCKET]$/i;
    var str = valor.toString().toUpperCase();
  
    if (!nifRexp.test(str) && !nieRexp.test(str))
        valido = false;
  
    var nie = str
        .replace(/^[X]/, '0')
        .replace(/^[Y]/, '1')
        .replace(/^[Z]/, '2');
  
    var letter = str.substr(-1);
    var charIndex = parseInt(nie.substr(0, 8)) % 23;
  
    if (validChars.charAt(charIndex) === letter)
        valido = true;
  
    return valido;
  }


// Referencia al botón de envío
let botonEnviar = document.getElementById('botonEnviar');


// Asignar evento al botón
botonEnviar.addEventListener('click', function () {

    // Limpiar mensajes de error previos
    let errores = document.querySelectorAll('.error');
    // El siguiente bucle for limpia los posibles errores de un intento anterior
    for (let i = 0; i < errores.length; i++) {
        errores[i].innerHTML = '';
    }

    // Obtener valores de los campos
    let asunto = document.getElementById('asunto').value.trim();
    let dni = document.getElementById('dni').value.trim();
    let nombre = document.getElementById('nombre').value.trim();
    let apellido1 = document.getElementById('apellido1').value.trim();
    let apellido2 = document.getElementById('apellido2').value.trim();
    let fechaNacimiento = document.getElementById('fechaNacimiento').value.trim();
    let telefono = document.getElementById('telefono').value.trim();
    let email = document.getElementById('email').value.trim();
    let domicilio = document.getElementById('domicilio').value.trim();
    let postal = document.getElementById('postal').value.trim();
    let municipio = document.getElementById('municipio').value.trim();
    let oficina = document.getElementById('oficina').value.trim();
    let descripcion = document.getElementById('descripcion').value.trim();
    let aceptarTerminos = document.getElementById('aceptarTerminos').checked;

    let esValido = true;

    // Validar campos obligatorios
    if (asunto == '') {
        document.getElementById('error-asunto').innerHTML = 'El campo asunto es necesario para completar el formulario';
        esValido = false;
    }
    if (!validarDNI(dni)) {
        document.getElementById('error-dni').innerHTML = 'El DNI debe tener 8 dígitos seguidos de una letra';
        esValido = false;
    }
    if (nombre == '') {
        document.getElementById('error-nombre').innerHTML = 'El campo nombre es necesario para completar el formulario';
        esValido = false;
    }
    if (apellido1 == '') {
        document.getElementById('error-apellido1').innerHTML = 'El campo primer apellido es necesario para completar el formulario';
        esValido = false;
    }
    if (apellido2 == '') {
        document.getElementById('error-apellido2').innerHTML = 'El campo segundo apellido es necesario para completar el formulario';
        esValido = false;
    }
    if (fechaNacimiento == '') {
        document.getElementById('error-fechaNacimiento').innerHTML = 'El campo Fecha Nacimiento es necesario para completar el formulario';
        esValido = false;
    }
    if (telefono == '') {
        document.getElementById('error-telefono').innerHTML = 'El campo telefono es necesario para completar el formulario';
        esValido = false;
    }
    if (domicilio == '') {
        document.getElementById('error-domicilio').innerHTML = 'El campo domicilio es necesario para completar el formulario';
        esValido = false;
    }
    if (postal == '') {
        document.getElementById('error-postal').innerHTML = 'El campo postal es necesario para completar el formulario';
        esValido = false;
    }
    if (municipio == '') {
        document.getElementById('error-municipio').innerHTML = 'El campo municipio es necesario para completar el formulario';
        esValido = false;
    }
    if (oficina == '') {
        document.getElementById('error-oficina').innerHTML = 'El campo oficina es necesario para completar el formulario';
        esValido = false;
    }
    if (descripcion == '') {
        document.getElementById('error-descripcion').innerHTML = 'El campo información requerida es necesario para completar el formulario';
        esValido = false;
    }
   
    if (!aceptarTerminos) {
        document.getElementById('error-terminos').innerHTML = 'Debe aceptar el tratamiento de datos personales';
        esValido = false;
    }
    

});

    </script>
</body>
</html>